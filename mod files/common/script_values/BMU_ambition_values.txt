BMU_ambition_get_council_position = {
	if = {
		limit = { exists = scope:FF_ambition_get_council_position }
		if = {
			limit = { scope:councillor_chancellor = yes }
			add = BMU_ambition_get_council_position_councillor_chancellor
		}
		else_if = {
			limit = { scope:councillor_steward = yes }
			add = BMU_ambition_get_council_position_councillor_steward
		}
		else_if = {
			limit = { scope:councillor_marshal = yes }
			add = BMU_ambition_get_council_position_councillor_marshal
		}
		else_if = {
			limit = { scope:councillor_spymaster = yes }
			add = BMU_ambition_get_council_position_councillor_spymaster
		}
		else = {
			add = BMU_ambition_get_council_position_base
		}
	}
}

BMU_ambition_has_council_position = {
	if = {
		limit = { is_councillor_of = scope:score_contender }
		add = {
			value = {
				if = {
					limit = { has_council_position = councillor_chancellor }
					subtract = BMU_ambition_get_council_position_councillor_chancellor
				}
				else_if = {
					limit = { has_council_position = councillor_steward }
					subtract = BMU_ambition_get_council_position_councillor_steward
				}
				else_if = {
					limit = { has_council_position = councillor_marshal }
					subtract = BMU_ambition_get_council_position_councillor_marshal
				}
				else_if = {
					limit = { has_council_position = councillor_spymaster }
					subtract = BMU_ambition_get_council_position_councillor_spymaster
				}
				else = {
					subtract = BMU_ambition_get_council_position_base
				}
			}
			desc = BMU_ambition_has_council_position
			format = "FF_VALUE_FORMAT"
		}
		# add = {
		# 	value = {
		# 	}
		# 	desc = BMU_ambition_has_council_position
		# 	format = "FF_VALUE_FORMAT"
		# }
	}
}

BMU_ambition_get_council_position_base = {
	add = {
		value = ai_energy
		desc = BMU_ambition_get_council_position_energy
		format = "FF_VALUE_FORMAT"
	}
	if = {
		limit = { is_powerful_vassal = yes }
		add = {
			value = 50
			desc = BMU_ambition_get_council_position_powerful_vassal
			format = "FF_VALUE_FORMAT"
		}
	}
}

BMU_ambition_get_council_position_councillor_chancellor = {
	add = {
		value = {
			add = BMU_ambition_get_council_position_base
			add = ai_sociability
		}
		# value = 10000
		desc = BMU_ambition_get_council_position_councillor_chancellor
		format = "FF_VALUE_FORMAT"
	}
}

BMU_ambition_get_council_position_councillor_steward = {
	add = {
		value = {
			add = BMU_ambition_get_council_position_base
			add = ai_greed
		}
		desc = BMU_ambition_get_council_position_councillor_steward
		format = "FF_VALUE_FORMAT"
	}
}

BMU_ambition_get_council_position_councillor_marshal = {
	add = {
		value = {
			add = BMU_ambition_get_council_position_base
			add = ai_boldness
		}
		desc = BMU_ambition_get_council_position_councillor_marshal
		format = "FF_VALUE_FORMAT"
	}
}

BMU_ambition_get_council_position_councillor_spymaster = {
	add = {
		value = {
			add = BMU_ambition_get_council_position_base
			add = ai_vengefulness
		}
		desc = BMU_ambition_get_council_position_councillor_spymaster
		format = "FF_VALUE_FORMAT"
	}
}

BMU_ambition_cost = {
	if = {
		limit = {
			NOT = { exists = scope:current_councillor }
			scope:contender.story_owner = {
				any_councillor = {
					trigger_if = {
						limit = { scope:bargain.var:council_position = flag:chancellor }
						has_council_position = councillor_chancellor
					}
					trigger_else_if = {
						limit = { scope:bargain.var:council_position = flag:steward }
						has_council_position = councillor_steward
					}
					trigger_else_if = {
						limit = { scope:bargain.var:council_position = flag:marshal }
						has_council_position = councillor_marshal
					}
					trigger_else_if = {
						limit = { scope:bargain.var:council_position = flag:spymaster }
						has_council_position = councillor_spymaster
					}
					trigger_else = { always = no }
					save_temporary_scope_as = current_councillor
				}
			}
		}
		if = {
			limit = { exists = scope:current_councillor }
			if = {
				limit = {
					scope:current_councillor = {
						any_owned_story = {
							story_type = BMU_stakeholder_story
							var:pressed_claim_story = scope:contender.var:pressed_claim_story
							var:status = flag:supporter
							var:contender = scope:contender
						}
					}
				}
				add = {
					value = {
						add = 100
						subtract = {
							add = scope:current_councillor.max_military_strength
							divide = scope:supporter.story_owner.max_military_strength
							multiply = 100
						}
					}
					desc = "BMU_bargain_for_council_position_weaker_than_current_councillor_supporter"
					format = "FF_VALUE_FORMAT"
				}
			}
			add = {
				value = {
					if = {
						limit = { scope:bargain.var:council_position = flag:chancellor }
						add = scope:supporter.story_owner.diplomacy
						subtract = scope:current_councillor.diplomacy
					}
					else_if = {
						limit = { scope:bargain.var:council_position = flag:steward }
						add = scope:supporter.story_owner.stewardship
						subtract = scope:current_councillor.stewardship
					}
					else_if = {
						limit = { scope:bargain.var:council_position = flag:marshal }
						add = scope:supporter.story_owner.martial
						subtract = scope:current_councillor.martial
					}
					else_if = {
						limit = { scope:bargain.var:council_position = flag:spymaster }
						add = scope:supporter.story_owner.intrigue
						subtract = scope:current_councillor.intrigue
					}
					multiply = 10
				}
				desc = "BMU_bargain_for_council_position_skill_difference"
				format = "FF_VALUE_FORMAT"
			}
			if = {
				limit = {
					scope:current_councillor = { is_powerful_vassal = yes }
					scope:contender.story_owner = {
						any_powerful_vassal = {
							max_military_strength < scope:supporter.story_owner.max_military_strength
							count = 0
						}
					}
				}
				add = {
					value = -50
					desc = "BMU_bargain_for_council_position_replace_powerful_vassal"
					format = "FF_VALUE_FORMAT"
				}
			}
		}
	}
}